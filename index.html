<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEXUS // DOC OPS V4 [TITAN]</title>
    
    <!-- SEO & Embed Meta Tags -->
    <meta name="description" content="NEXUS OPS V4 - Advanced document operations and extraction suite.">
    <meta name="theme-color" content="#00f3ff">

    <!-- Preconnect to CDNs for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

    <!-- External Libs (Optimized) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap-reboot.min.css" rel="stylesheet"> <!-- Using Reboot for resets only -->
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    <!-- Main Application Styles -->
    <link rel="stylesheet" href="style.css">
</head>

<!-- Body class sets default theme, data-state is controlled by JS -->
<body class="theme-nexus" data-state="idle">

    <!-- Background Effects -->
    <div class="background-effects">
        <div class="scanlines"></div>
        <div class="bg-grid"></div>
        <div class="vignette"></div>
    </div>

    <!-- Command Palette Modal -->
    <div id="commandPalette" class="command-palette-container">
        <div class="command-palette">
            <input type="text" id="commandInput" placeholder="Enter command (e.g., 'download pdf')...">
            <ul id="commandResults"></ul>
        </div>
    </div>

    <!-- Main Application Wrapper -->
    <div class="app-wrapper">
        
        <header class="app-header animate__animated animate__fadeInDown">
            <div class="logo">
                <svg class="logo-svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="5"/><path d="M50 5L50 95" stroke="currentColor" stroke-width="5"/><path d="M5 50H95" stroke="currentColor" stroke-width="5"/><circle cx="50" cy="50" r="15" stroke="currentColor" stroke-width="5"/></svg>
                NEXUS <span class="highlight">OPS</span><span class="version-tag">v4.0</span>
            </div>
            <div id="statusIndicator" class="status-indicator" role="status">
                <span class="dot animate__animated animate__flash animate__infinite animate__slower"></span>
                <span id="statusText">AWAITING COMMAND</span>
            </div>
        </header>

        <main class="app-main">
            <!-- Left Side: Control Panel -->
            <aside id="controlPanel" class="control-panel glass-panel animate__animated animate__fadeInLeft">
                <div class="panel-header">
                    <i class="fa-solid fa-terminal"></i>
                    <span>C O N T R O L S</span>
                </div>

                <section class="panel-section" aria-labelledby="input-header">
                    <h3 class="section-header" id="input-header">TARGET ACQUISITION</h3>
                    <div class="input-group">
                        <i class="fa-solid fa-link input-icon"></i>
                        <input type="text" id="urlInput" class="cyber-input" placeholder="PASTE GOOGLE DOCS URL..." autocomplete="off">
                    </div>
                    <button class="btn btn-primary w-100" id="initBtn">
                        <i class="fa-solid fa-satellite-dish"></i> INITIATE SEQUENCE
                    </button>
                </section>
                
                <!-- Tools are dynamically shown via the data-state attribute -->
                <div class="dynamic-tools">
                    <section class="panel-section" aria-labelledby="protocols-header">
                        <h3 class="section-header" id="protocols-header">EXTRACTION PROTOCOLS</h3>
                        <div class="btn-grid">
                            <button class="btn btn-tool" onclick="Nexus.getPlugin('downloader').download('pdf')" data-tooltip="Download as PDF"><i class="fa-solid fa-file-pdf"></i><span>PDF</span></button>
                            <button class="btn btn-tool" onclick="Nexus.getPlugin('downloader').download('docx')" data-tooltip="Download as Word Doc"><i class="fa-solid fa-file-word"></i><span>DOCX</span></button>
                            <button class="btn btn-tool" onclick="Nexus.getPlugin('downloader').download('html')" data-tooltip="Download as HTML"><i class="fa-brands fa-html5"></i><span>HTML</span></button>
                            <button class="btn btn-tool" onclick="Nexus.getPlugin('downloader').download('txt')" data-tooltip="Download as Plain Text"><i class="fa-solid fa-file-lines"></i><span>TXT</span></button>
                        </div>
                    </section>

                    <section class="panel-section" aria-labelledby="modules-header">
                        <h3 class="section-header" id="modules-header">ADVANCED MODULES</h3>
                        <button class="btn btn-special w-100" onclick="Nexus.getPlugin('magicCopy').execute()">
                            <i class="fa-solid fa-wand-magic-sparkles"></i> MAGIC COPY
                        </button>
                        <button class="btn btn-secondary w-100 mt-2" onclick="Nexus.getPlugin('contentAnalysis').execute()">
                            <i class="fa-solid fa-magnifying-glass-chart"></i> ANALYZE CONTENT
                        </button>
                    </section>
                </div>

                <section class="panel-section console-container" aria-labelledby="log-header">
                    <div class="console-header" id="log-header">
                        <span>SYSTEM LOG</span>
                        <div class="ping-indicator"></div>
                    </div>
                    <div id="sysLog" class="console-body" role="log" aria-live="polite"></div>
                </section>
            </aside>

            <!-- Right Side: Viewer Panel -->
            <section id="viewerPanel" class="viewer-panel glass-panel animate__animated animate__fadeInRight" aria-labelledby="viewer-header">
                <div class="panel-header" id="viewer-header">
                    <i class="fa-solid fa-eye"></i>
                    <span>S E C U R E &nbsp; V I E W E R</span>
                </div>
                <div class="viewer-content">
                    <div id="loader" class="iframe-overlay">
                        <div class="loader-animation">
                            <div class="loader-ring"></div>
                            <div class="loader-ring"></div>
                            <div class="loader-ring"></div>
                        </div>
                        <div class="loading-text">ESTABLISHING SECURE CONNECTION...</div>
                    </div>
                    
                    <iframe id="docFrame" name="docFrame" title="Document Viewer" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
                    
                    <div id="placeholder" class="placeholder-content">
                        <i class="fa-brands fa-google fa-4x"></i>
                        <h3>DOCUMENT WILL RENDER HERE</h3>
                        <p>Awaiting target acquisition from the control panel.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Main Application Logic -->
    <script src="script.js"></script>
</body>
</html>
